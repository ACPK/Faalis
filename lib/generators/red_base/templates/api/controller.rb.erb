# require_dependency "red_base/api_controller"

class API::V1::<%= resource.pluralize %>Controller < RedBase::APIController

  load_and_authorize_resource :except => [:destory]


  # GET /api/v1/<%= resource.pluralize.underscore %>
  def index
  end

  def create
    if @<%= resource.underscore %>.save
        @<%= resource.underscore %>
    else
        @<%= resource.underscore %>.errors
    end
  end

  def show
  end

  def update
    if @<%= resource.underscore %>.update
        @<%= resource.underscore %>
    else
        @<%= resource.underscore %>.errors
    end
  end

  def destroy
    ids = params[:id].split(",")
    @<%= resource.pluralize.underscore %> = <%= resource.pluralize %>.where(:id => ids)
    authorize! :destory, @<%= resource.pluralize.underscore %>
    @@<%= resource.pluralize.underscore %>.destroy_all
  end
end
